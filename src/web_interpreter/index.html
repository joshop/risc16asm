<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RISC-16 interpreter</title>

    <!-- favicon -->
    <link rel="icon" href="https://fav.farm/🖥️" />

    <!-- Styles -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="main.css" />

    <!-- Scripts -->
    <script src="js/main.js" type="module" defer></script>
  </head>

  <body class="w-full h-screen overflow-hidden">
    <!-- Columns -->
    <div class="flex w-full p-4 gap-4">
      <!-- Left column: status -->
      <div>
        <!-- Header -->
        <h1 class="mb-4">
          <b>RISC-16 web interpreter</b>
          <a href="https://github.com/joshop/risc16asm">(Github)</a>
        </h1>

        <!-- File upload -->
        <div>
          <b>Upload machine code</b><br />
          <input class="border px-3 py-1 mt-1" type="file" id="file-input" />
        </div>

        <br />

        <!-- Readout -->
        <div>
          <b>Processor state</b>
          <table class="border-spacing-x-8 border-separate">
            <tr>
              <td>cycle</td>
              <td id="cycle">n/a</td>
            </tr>
            <tr>
              <td>pc</td>
              <td id="pc">n/a</td>
            </tr>
            <tr>
              <td>mem[pc]</td>
              <td id="inst">n/a</td>
            </tr>
            <tr>
              <td>speed</td>
              <td id="clock-speed">n/a</td>
            </tr>
          </table>

          <br />

          <div class="flex gap-4">
            <button disabled onclick="step();" id="step-btn">step</button>
            <button disabled onclick="play();" id="play-btn">play</button>
            <button disabled onclick="pause();" id="pause-btn">pause</button>
          </div>

          <br />

          <!-- Register values -->
          <div>
            <b>Registers</b>
            <table id="reg-table" class="border-spacing-x-8 border-separate">
              <tbody>
                <tr>
                  <td>r1 (ra)</td>
                  <td id="r1">n/a</td>
                </tr>
                <tr>
                  <td>r2 (sp)</td>
                  <td id="r2">n/a</td>
                </tr>
                <tr>
                  <td>r3 (a0)</td>
                  <td id="r3">n/a</td>
                </tr>
                <tr>
                  <td>r4 (a1)</td>
                  <td id="r4">n/a</td>
                </tr>
                <tr>
                  <td>r5 (a2)</td>
                  <td id="r5">n/a</td>
                </tr>
                <tr>
                  <td>r6 (a3)</td>
                  <td id="r6">n/a</td>
                </tr>
                <tr>
                  <td>r7 (a4)</td>
                  <td id="r7">n/a</td>
                </tr>
              </tbody>
            </table>
          </div>

          <br />

          <div class="w-80">
            <b>Memory</b>
            <canvas
              class="w-full"
              width="1024"
              height="1024"
              id="memory-canvas"
            ></canvas>
          </div>
        </div>
      </div>

      <!-- Right column: display -->
      <div class="h-full overflow-y-auto w-full">
        <b>Display</b>
        <canvas
          class="w-full"
          width="48"
          height="32"
          id="display-canvas"
        ></canvas>
      </div>
    </div>
  </body>
</html>
